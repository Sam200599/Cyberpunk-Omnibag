import * as INV from "./inventory.js"; let root, slots={}, otherList, currentBag=null; export function init(){ root=document.querySelector("#equipped-panel"); if(!root) return; slots={ head:root.querySelector("#slot-head"), torso:root.querySelector("#slot-torso"), handsWear:root.querySelector("#slot-hands"), legs:root.querySelector("#slot-legs"), boots:root.querySelector("#slot-boots"), weaponContainer:root.querySelector("#equipped-hands-container") }; otherList=root.querySelector("#equipped-other-list"); INV.subscribe(render); } function render(state){ if(!root) return; const bags=INV.getAllBags(); if(bags.length===0){ root.innerHTML='<p>Nenhuma mochila.</p>'; return; } currentBag=bags[0]; slots.weaponContainer.innerHTML=''; for(const inst of currentBag.items){ if(inst.meta&&inst.meta.equippedSlot){ const el=document.createElement('div'); el.textContent=inst.name; if(inst.meta.equippedSlot.startsWith('hand')) slots.weaponContainer.appendChild(el); else if(inst.meta.equippedSlot==='head') slots.head.appendChild(el); else otherList.appendChild(el); } } } export function equipItem(inst,slot){ INV.updateItemInstance(currentBag.id,inst.iid,{ meta: {...inst.meta, equippedSlot: slot} }); }